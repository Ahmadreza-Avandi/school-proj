(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{54722:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return t(40396)}])},40396:function(e,r,t){"use strict";t.r(r);var n=t(85893),s=t(67294),o=t(18745),a=t(61730),l=t(60990),i=t(93454),d=t(96788),u=t(26541),c=t(95611),p=t(52857),x=t(6897),h=t(20646),m=t(45083),f=t(15972),Z=t(84677),j=t(84925),v=t(10018),g=t(87536),b=t(87066),w=t(8267),y=t(5562),_=t(21700),N=t(82126),C=t(43832),k=t(15928),z=t(16310),W=t(47533);let S=z.Ry({fullName:z.Z_().required("نام و نام خانوادگی الزامی است"),nationalCode:z.Z_().required("کد ملی الزامی است").matches(/^[0-9]{10}$/,"کد ملی باید 10 رقم باشد"),phoneNumber:z.Z_().required("شماره تماس الزامی است").matches(/^[0-9]{11}$/,"شماره تماس باید 11 رقم باشد"),password:z.Z_().required("رمز عبور الزامی است").min(8,"رمز عبور باید حداقل 8 کاراکتر باشد"),role:z.Z_().required("انتخاب نقش الزامی است")}).required();r.default=()=>{let e=(0,o.Z)();(0,a.Z)(e.breakpoints.down("sm"));let[r,t]=(0,s.useState)(!1),[z,E]=(0,s.useState)([]),[I,T]=(0,s.useState)({open:!1,message:"",severity:"success"}),{control:q,handleSubmit:A,reset:P,formState:{errors:Q}}=(0,g.cI)({resolver:(0,W.X)(S),defaultValues:{fullName:"",nationalCode:"",phoneNumber:"",password:"",role:""}});(0,s.useEffect)(()=>{(async()=>{try{let e=(await b.Z.get("http://localhost:3001/users/role")).data;E(e)}catch(e){T({open:!0,message:"خطا در دریافت نقش‌ها",severity:"error"})}})()},[]);let D=async e=>{try{let r=z.find(r=>r.name===e.role);if(!r)throw Error("نقش معتبر نیست");let t=await b.Z.post("/api/add-user",{...e,roleId:r.id});200===t.status&&(T({open:!0,message:"کاربر با موفقیت ثبت شد",severity:"success"}),P())}catch(e){var r,t;T({open:!0,message:(null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||"خطا در ثبت کاربر",severity:"error"})}},O=()=>{T(e=>({...e,open:!1}))};return(0,n.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - ".concat(e.spacing(16),")"),padding:e.spacing(2)},children:[(0,n.jsxs)(i.Z,{elevation:3,sx:{p:4,width:"100%",maxWidth:"500px",borderRadius:2,backgroundColor:e.palette.background.paper,backdropFilter:"blur(10px)",transition:"all 0.3s ease"},children:[(0,n.jsx)(d.Z,{variant:"h5",component:"h1",sx:{mb:4,textAlign:"center",fontWeight:600,color:e.palette.primary.main},children:"ثبت‌نام کاربر جدید"}),(0,n.jsx)("form",{onSubmit:A(D),children:(0,n.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",gap:2.5},children:[(0,n.jsx)(g.Qr,{name:"fullName",control:q,render:e=>{var r;let{field:t}=e;return(0,n.jsx)(u.Z,{...t,label:"نام و نام خانوادگی",error:!!Q.fullName,helperText:null===(r=Q.fullName)||void 0===r?void 0:r.message,InputProps:{startAdornment:(0,n.jsx)(c.Z,{position:"start",children:(0,n.jsx)(w.Z,{size:20})})},fullWidth:!0})}}),(0,n.jsx)(g.Qr,{name:"nationalCode",control:q,render:e=>{var r;let{field:t}=e;return(0,n.jsx)(u.Z,{...t,label:"کد ملی",error:!!Q.nationalCode,helperText:null===(r=Q.nationalCode)||void 0===r?void 0:r.message,InputProps:{startAdornment:(0,n.jsx)(c.Z,{position:"start",children:(0,n.jsx)(y.Z,{size:20})})},fullWidth:!0})}}),(0,n.jsx)(g.Qr,{name:"phoneNumber",control:q,render:e=>{var r;let{field:t}=e;return(0,n.jsx)(u.Z,{...t,label:"شماره تماس",error:!!Q.phoneNumber,helperText:null===(r=Q.phoneNumber)||void 0===r?void 0:r.message,InputProps:{startAdornment:(0,n.jsx)(c.Z,{position:"start",children:(0,n.jsx)(_.Z,{size:20})})},fullWidth:!0})}}),(0,n.jsx)(g.Qr,{name:"password",control:q,render:e=>{var s;let{field:o}=e;return(0,n.jsx)(u.Z,{...o,type:r?"text":"password",label:"رمز عبور",error:!!Q.password,helperText:null===(s=Q.password)||void 0===s?void 0:s.message,InputProps:{startAdornment:(0,n.jsx)(c.Z,{position:"start",children:(0,n.jsx)(N.Z,{size:20})}),endAdornment:(0,n.jsx)(c.Z,{position:"end",children:(0,n.jsx)(p.Z,{onClick:()=>t(!r),edge:"end",children:r?(0,n.jsx)(C.Z,{size:20}):(0,n.jsx)(k.Z,{size:20})})})},fullWidth:!0})}}),(0,n.jsx)(g.Qr,{name:"role",control:q,render:e=>{let{field:r}=e;return(0,n.jsxs)(x.Z,{fullWidth:!0,error:!!Q.role,children:[(0,n.jsx)(h.Z,{children:"نقش"}),(0,n.jsx)(m.Z,{...r,label:"نقش",children:z.map(e=>(0,n.jsx)(f.Z,{value:e.name,children:e.name},e.id))}),Q.role&&(0,n.jsx)(d.Z,{color:"error",variant:"caption",sx:{mt:.5,mr:1.5},children:Q.role.message})]})}}),(0,n.jsx)(Z.Z,{type:"submit",variant:"contained",fullWidth:!0,size:"large",sx:{mt:2,py:1.5,borderRadius:2,textTransform:"none",fontSize:"1rem",fontWeight:600,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 16px rgba(0,0,0,0.15)"}},children:"ثبت‌نام"})]})})]}),(0,n.jsx)(j.Z,{open:I.open,autoHideDuration:6e3,onClose:O,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,n.jsx)(v.Z,{onClose:O,severity:I.severity,variant:"filled",sx:{width:"100%"},children:I.message})})]})}}},function(e){e.O(0,[6838,9311,1349,7536,7623,2888,9774,179],function(){return e(e.s=54722)}),_N_E=e.O()}]);